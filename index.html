<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CalCute â€” ì¼ì£¼ì¼ ì‹ë‹¨ ê³„íš</title>
<style>
  :root{
    --bg:#f3fff9; --card:#ffffff; --mint:#9ee6cf; --mint-2:#7fdac1; --accent:#2f675e; --muted:#6b8b7a; --shadow:rgba(43,74,63,0.08);
  }
  *{box-sizing:border-box;}
  body{margin:0;font-family:'Nunito',system-ui,-apple-system; background:var(--bg); color:var(--accent); padding:20px;}
  .wrap{max-width:1000px;margin:auto;background:linear-gradient(180deg,#ffffff,#f7fffb);border-radius:18px;padding:18px;box-shadow:0 12px 30px var(--shadow);position:relative;}
  header{display:flex;align-items:center;gap:14px;}
  .logo{background:linear-gradient(135deg,var(--mint),var(--mint-2));padding:12px 18px;border-radius:14px;color:#053827;font-weight:800;font-size:20px;box-shadow:0 6px 18px rgba(47,103,94,0.12);}
  h1{margin:0;font-size:20px;}
  p.lead{margin:2px 0 0;color:var(--muted);}
  .day-plan{margin-top:18px;background:#fff;padding:14px;border-radius:12px;box-shadow:0 8px 20px rgba(15,30,25,0.04);}
  .meal-row{display:flex;align-items:center;gap:8px;margin-top:6px;}
  input[type=text], input[type=number], select{padding:6px;border-radius:8px;border:1px solid #e6f6ef;}
  button.primary{background:var(--mint);border:0;padding:6px 12px;border-radius:10px;color:#053827;font-weight:700;cursor:pointer;}
  button.ghost{background:transparent;border:1px solid #d7f0e8;padding:6px 10px;border-radius:8px;color:var(--accent);cursor:pointer;}
  .meal-list{margin-top:6px;}
  .meal-item{display:flex;align-items:center;gap:6px;padding:4px;border:1px dashed #e6f6ef;border-radius:8px;margin-top:4px;}
  .meal-item .name{flex:1;}
  .summary{margin-top:10px;font-weight:700;}
  .cat{position:absolute;right:18px;bottom:18px;width:110px;height:110px;background:url('https://cdn-icons-png.flaticon.com/512/616/616408.png') no-repeat center/contain;opacity:0.95;}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="logo">CalCute</div>
  <div>
    <h1>ì¼ì£¼ì¼ ì‹ë‹¨ ê³„íš</h1>
    <p class="lead">ë¯¼íŠ¸ í…Œë§ˆ + ê·€ì—¬ìš´ ê³ ì–‘ì´ì™€ í•¨ê»˜í•˜ëŠ” ì¼ì£¼ì¼ ì‹ë‹¨ ê³„íš ğŸ±ğŸ’š</p>
  </div>
</header>

<div style="margin-top:12px;">
  <label>ìŒì‹ ê²€ìƒ‰ ë˜ëŠ” ìƒˆ ìŒì‹ ì…ë ¥:</label>
  <input id="foodSearch" type="text" placeholder="ì˜ˆ: ë°”ë‚˜ë‚˜, ê¹€ë°¥">
  <button class="primary" id="addCustom">ì¶”ê°€</button>
</div>

<div style="margin-top:18px;" id="weekPlan"></div>

<div class="summary" id="weeklySummary">ì£¼ê°„ ì´ ì¹¼ë¡œë¦¬: 0 kcal</div>

<div class="cat"></div>
</div>

<script>
// ìƒ˜í”Œ ìŒì‹ DB (100g ê¸°ì¤€)
let FOOD_DB = [
  {name:'ë°”ë‚˜ë‚˜', kcal:89, carb:22.8, protein:1.1, fat:0.3},
  {name:'ì‚¬ê³¼', kcal:52, carb:14, protein:0.3, fat:0.2},
  {name:'ë‹­ê°€ìŠ´ì‚´', kcal:165, carb:0, protein:31, fat:3.6},
  {name:'ë°¥', kcal:130, carb:28, protein:2.7, fat:0.3},
  {name:'ê¹€ë°¥', kcal:300, carb:45, protein:7, fat:7},
  {name:'ë¼ë©´', kcal:500, carb:65, protein:10, fat:20}
];

// 7ì¼ì¹˜ êµ¬ì¡° ìƒì„±
let week = [];
for(let i=0;i<7;i++){
  week.push({day:`Day ${i+1}`, meals:{ì•„ì¹¨:[], ì ì‹¬:[], ì €ë…:[]}});
}

// ë Œë”ë§
function renderWeek(){
  const container = document.getElementById('weekPlan');
  container.innerHTML='';
  week.forEach((dayObj, dayIdx)=>{
    const dayDiv = document.createElement('div');
    dayDiv.className='day-plan';
    dayDiv.innerHTML=`<h3>${dayObj.day}</h3>`;
    ['ì•„ì¹¨','ì ì‹¬','ì €ë…'].forEach(mealName=>{
      const mealDiv = document.createElement('div');
      mealDiv.innerHTML=`<b>${mealName}</b> <div class="meal-list" id="mealList-${dayIdx}-${mealName}"></div>`;
      dayDiv.appendChild(mealDiv);
      renderMealList(dayIdx, mealName);
    });
    container.appendChild(dayDiv);
  });
  updateWeeklySummary();
}

function renderMealList(dayIdx, mealName){
  const listDiv = document.getElementById(`mealList-${dayIdx}-${mealName}`);
  listDiv.innerHTML='';
  week[dayIdx].meals[mealName].forEach((m,i)=>{
    const itemDiv = document.createElement('div');
    itemDiv.className='meal-item';
    itemDiv.innerHTML=`
      <span class="name">${m.name}</span>
      <input type="number" class="qty" data-day="${dayIdx}" data-meal="${mealName}" data-idx="${i}" value="${m.qty}" /> g
      <span>${Math.round(m.kcal*m.qty/100)} kcal</span>
      <button class="ghost" data-day="${dayIdx}" data-meal="${mealName}" data-idx="${i}">ì‚­ì œ</button>
    `;
    listDiv.appendChild(itemDiv);
  });

  // ì´ë²¤íŠ¸
  listDiv.querySelectorAll('.qty').forEach(inp=>{
    inp.addEventListener('change', e=>{
      const d = e.target.dataset.day;
      const meal = e.target.dataset.meal;
      const idx = e.target.dataset.idx;
      week[d].meals[meal][idx].qty = Number(e.target.value)||0;
      renderMealList(d, meal);
      updateWeeklySummary();
    });
  });
  listDiv.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const d = e.target.dataset.day;
      const meal = e.target.dataset.meal;
      const idx = e.target.dataset.idx;
      week[d].meals[meal].splice(idx,1);
      renderMealList(d, meal);
      updateWeeklySummary();
    });
  });
}

function addFoodToMeal(food){
  // ê¸°ë³¸ì ìœ¼ë¡œ ì²«ë‚  ì•„ì¹¨ì— ì¶”ê°€
  week[0].meals['ì•„ì¹¨'].push({...food, qty:100});
  renderWeek();
}

document.getElementById('addCustom').addEventListener('click', ()=>{
  const q = document.getElementById('foodSearch').value.trim();
  if(!q) return;
  // ê¸°ì¡´ DB ê²€ìƒ‰
  let found = FOOD_DB.find(f=>f.name===q);
  if(!found){
    const kcal = Number(prompt(`'${q}' 100gë‹¹ kcal ì…ë ¥:`,'100'))||100;
    const carb = Number(prompt('íƒ„ìˆ˜í™”ë¬¼(g)'))||0;
    const protein = Number(prompt('ë‹¨ë°±ì§ˆ(g)'))||0;
    const fat = Number(prompt('ì§€ë°©(g)'))||0;
    found = {name:q,kcal,carb,protein,fat};
    FOOD_DB.push(found);
  }
  addFoodToMeal(found);
  document.getElementById('foodSearch').value='';
});

function updateWeeklySummary(){
  let total = 0;
  week.forEach(day=>{
    ['ì•„ì¹¨','ì ì‹¬','ì €ë…'].forEach(meal=>{
      day.meals[meal].forEach(f=>{
        total += f.kcal * f.qty/100;
      });
    });
  });
  document.getElementById('weeklySummary').textContent = `ì£¼ê°„ ì´ ì¹¼ë¡œë¦¬: ${Math.round(total)} kcal`;
}

// ì´ˆê¸° ë Œë”
renderWeek();
</script>
</body>
</html>
